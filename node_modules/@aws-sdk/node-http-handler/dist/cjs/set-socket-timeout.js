"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.setSocketTimeout = void 0;
function setSocketTimeout(request, reject, timeoutInMs = 0) {
    request.setTimeout(timeoutInMs, function () {
        // abort the request to destroy it
        this.abort();
        const timeoutError = new Error(`Connection timed out after ${timeoutInMs} ms`);
        timeoutError.name = "TimeoutError";
        reject(timeoutError);
    });
}
exports.setSocketTimeout = setSocketTimeout;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2V0LXNvY2tldC10aW1lb3V0LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL3NldC1zb2NrZXQtdGltZW91dC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFFQSxTQUFnQixnQkFBZ0IsQ0FBQyxPQUFzQixFQUFFLE1BQTRCLEVBQUUsV0FBVyxHQUFHLENBQUM7SUFDcEcsT0FBTyxDQUFDLFVBQVUsQ0FBQyxXQUFXLEVBQUU7UUFDOUIsa0NBQWtDO1FBQ2xDLElBQUksQ0FBQyxLQUFLLEVBQUUsQ0FBQztRQUNiLE1BQU0sWUFBWSxHQUFHLElBQUksS0FBSyxDQUFDLDhCQUE4QixXQUFXLEtBQUssQ0FBQyxDQUFDO1FBQy9FLFlBQVksQ0FBQyxJQUFJLEdBQUcsY0FBYyxDQUFDO1FBQ25DLE1BQU0sQ0FBQyxZQUFZLENBQUMsQ0FBQztJQUN2QixDQUFDLENBQUMsQ0FBQztBQUNMLENBQUM7QUFSRCw0Q0FRQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENsaWVudFJlcXVlc3QgfSBmcm9tIFwiaHR0cFwiO1xuXG5leHBvcnQgZnVuY3Rpb24gc2V0U29ja2V0VGltZW91dChyZXF1ZXN0OiBDbGllbnRSZXF1ZXN0LCByZWplY3Q6IChlcnI6IEVycm9yKSA9PiB2b2lkLCB0aW1lb3V0SW5NcyA9IDApIHtcbiAgcmVxdWVzdC5zZXRUaW1lb3V0KHRpbWVvdXRJbk1zLCBmdW5jdGlvbiAodGhpczogQ2xpZW50UmVxdWVzdCkge1xuICAgIC8vIGFib3J0IHRoZSByZXF1ZXN0IHRvIGRlc3Ryb3kgaXRcbiAgICB0aGlzLmFib3J0KCk7XG4gICAgY29uc3QgdGltZW91dEVycm9yID0gbmV3IEVycm9yKGBDb25uZWN0aW9uIHRpbWVkIG91dCBhZnRlciAke3RpbWVvdXRJbk1zfSBtc2ApO1xuICAgIHRpbWVvdXRFcnJvci5uYW1lID0gXCJUaW1lb3V0RXJyb3JcIjtcbiAgICByZWplY3QodGltZW91dEVycm9yKTtcbiAgfSk7XG59XG4iXX0=